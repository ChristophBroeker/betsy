apply plugin: "groovy"
apply plugin: "java"
apply plugin: "idea"
apply plugin: "eclipse"
apply plugin: "application"

// Main class of betsy
mainClassName = "configuration.TestUsingParameters"

repositories {
    mavenCentral()
}

sourceSets {
	main {
		java {
			srcDirs = []
		}
		groovy {
			srcDir 'src/main/java'
			srcDir 'src/main/groovy'
			srcDir 'src/main/tests'
		}
		resources {
			srcDir 'src/main/resources'
            exclude 'virtual/server/**'
        }
	}
}

dependencies {
	groovy 'org.codehaus.groovy:groovy-all:2.1.1'
	compile 'org.apache.ant:ant:1.8.4'
	compile 'log4j:log4j:1.2.17'
	compile 'commons-daemon:commons-daemon:1.0.12'
	compile 'org.apache.commons:commons-compress:1.5'
	compile 'org.virtualbox:vboxjws:4.2.8'
	
	compile files(fileTree(dir: 'C:\\Program Files\\SmartBear\\soapUI-4.5.1\\lib', includes: ['*.jar'], exclude: ['log4j-*', 'xml-apis-*']))
	compile files(fileTree(dir: 'C:\\Program Files\\SmartBear\\soapUI-4.5.1\\bin', includes: ['*.jar']))
}

task wrapper(type: Wrapper) {
    gradleVersion = '1.4'
}

run {
    if(project.hasProperty('args')){
        args project.args.split('\\s+')
    }
}

task enginecontrol (type: JavaExec, dependsOn: build){
    description = 'Starts Engine Control GUI'
    classpath = sourceSets.main.runtimeClasspath
    main = "betsy.EngineControl"
}
